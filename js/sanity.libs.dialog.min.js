'use strict';(function($){$.fn.sanityDialog=function(options){return new sanityDialogClass($(this),options)};class sanityDialogClass{constructor(dialog,options){this.mVars={timeout:1,trigger:null,canClose:!0};this.mElements={dialog:null,close:null,};this.mWorking=!1;$.extend(this.mVars,options);this.mElements.dialog=dialog;this.mElements.dialog.addClass('sanity_dialog');if($('.sanity_dialog__close',this.mElements.dialog).length){this.mElements.close=$('.sanity_dialog__close',this.mElements.dialog)}else{this.mElements.close=$('<button class="sanity_dialog__close"></button>').appendTo(this.mElements.dialog)}
    if(!$('.sanity_dialog__content',this.mElements.dialog).length){dialog.wrapInner('<div class="sanity_dialog__content">')}
    if(!this.mVars.trigger){this.mVars.trigger=this.mElements.dialog.attr('sanity_dialog')}
    if(window.location.hash==='#dialog_'+this.mVars.trigger){this.showDialog()}
    $('[sanity_dialog-trigger="'+this.mVars.trigger+'"]').on('click',()=>{this.openDialog()});$(this.mElements.dialog).on('open',(event,params)=>{this.openDialog()});$(this.mElements.dialog).on('click',(e)=>{let target=$(e.target);if(target.is(this.mElements.dialog)||target.is(this.mElements.close)||target.is($('*',this.mElements.close))){this.closeDialog()}});$(this.mElements.dialog).on('close',(event,params)=>{this.closeDialog()});$(window).bind('popstate',(e)=>{if(window.location.hash!=='#dialog_'+this.mVars.trigger){this.hideDialog()}else{this.showDialog()}})}
    openDialog(){if(window.location.hash!=='#dialog_'+this.mVars.trigger){window.location.hash='#dialog_'+this.mVars.trigger}else{this.showDialog()}}
    closeDialog(){if(window.location.hash==='#dialog_'+this.mVars.trigger){history.back()}else{this.hideDialog()}}
    showDialog(){if(!this.mWorking&&!this.mElements.dialog.hasClass('sanity_dialog_display')){this.mWorking=!0;this.mElements.dialog.addClass('sanity_dialog_display');$('html').addClass('overflow_hidden--sanity_dialog');this.mElements.dialog.removeClass('sanity_dialog_out').addClass('sanity_dialog_in');this.mElements.dialog.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',()=>{this.mWorking=!1})}};hideDialog(){if(this.mVars.canClose){if(!this.mWorking&&this.mElements.dialog.hasClass('sanity_dialog_display')){this.mWorking=!0;this.mElements.dialog.removeClass('sanity_dialog_in').addClass('sanity_dialog_out');this.mElements.dialog.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',()=>{this.mWorking=!1;this.mElements.dialog.removeClass('sanity_dialog_display');if(window.location.hash.includes('#dialog_')){}else{$('html').removeClass('overflow_hidden--sanity_dialog')}})}}}}})(jQuery)